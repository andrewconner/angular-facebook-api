/*! angular-facebook-api - v0.0.17 - 2014-03-11 */
angular.module("jun.facebook",[]).provider("$FB",function(){"use strict";function a(a,b){return void 0===b?e[a]:(e[a]=b,d)}function b(a){!a||a.error?this.reject(a&&a.error||!1):this.resolve(a)}function c(a,b){var c=a.promise;return"function"==typeof b&&c.then(b),c}var d=this,e={appId:null,cookie:!1,logging:!0,status:!0,xfbml:!1,authResponse:void 0,frictionlessRequests:!1,hideFlashCallback:null,scope:"",enable_profile_selector:!1,profile_selector_ids:""};angular.forEach(["appId","cookie","logging","status","xfbml","authResponse","frictionlessRequests","hideFlashCallback","scope","enable_profile_selector","profile_selector_ids"],function(b){d[b]=angular.bind(d,a,b)}),this.option=function(b,c){return"object"==typeof b?(angular.extend(e,b),d):a(b,c)};var f,g,h;this.$get=["$window","$timeout","$q",function(a,b,c){h=c;var i=h.defer();if(e.appId){var j=a,k=j.document;j.fbAsyncInit=function(){f=d.FB=j.FB,f.init({appId:e.appId,cookie:e.cookie,logging:e.logging,status:e.status,xfbml:e.xfbml,authResponse:e.authResponse,frictionlessRequests:e.frictionlessRequests,hideFlashCallback:e.hideFlashCallback}),b(function(){i.resolve(f)})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/all.js",e.parentNode.insertBefore(d,e))}(k,"script","facebook-jssdk")}else i.reject("$FB: appId is not set!");return g=i.promise,d}],this.getLoginStatus=function(a){return g.then(function(d){var e=h.defer();return d.getLoginStatus(angular.bind(e,b)),c(e,a)})},this.api=function(){var a=arguments;return g.then(function(d){var e,f=h.defer(),g=Array.prototype.slice.call(a);return"function"==typeof g[g.length-1]&&(e=g.pop()),g.push(angular.bind(f,b)),d.api.apply(d,g),c(f,e)})},this.login=function(a,d){return g.then(function(f){function g(a){var b=d&&d[a];return void 0===b?e[a]:b}var i=h.defer();return"function"!=typeof a&&(a=null,d=a),f.login(angular.bind(i,b),{scope:g("scope"),enable_profile_selector:g("enable_profile_selector"),profile_selector_ids:g("profile_selector_ids")}),c(i,a)})},this.logout=function(a){return d.getLoginStatus().then(function(d){var e=h.defer();return d.authResponse?f.logout(angular.bind(e,b)):e.reject(d),c(e,a)})},this.disconnect=function(a){return g.then(function(d){var e=h.defer();return d.api("/me/permissions","DELETE",angular.bind(e,b)),c(e,a)})}});