/*! angular-facebook-api - v0.0.13 - 2014-03-10 */
angular.module("jun.facebook",[]).provider("$FB",function(){"use strict";function a(a,d){return void 0===d?c[a]:(c[a]=d,b)}var b=this,c={appId:null,cookie:!1,logging:!0,status:!0,xfbml:!1,authResponse:void 0,frictionlessRequests:!1,hideFlashCallback:null,scope:"",enable_profile_selector:!1,profile_selector_ids:""};angular.forEach(["appId","cookie","logging","status","xfbml","authResponse","frictionlessRequests","hideFlashCallback","scope","enable_profile_selector","profile_selector_ids"],function(c){b[c]=angular.bind(b,a,c)}),this.option=function(d,e){return"object"==typeof d?(angular.extend(c,d),b):a(d,e)};var d,e;this.$get=["$window","$timeout","$q",function(a,f,g){e=g;var h=e.defer();if(c.appId){var i=a,j=i.document;i.fbAsyncInit=function(){var a=i.FB;a.init({appId:c.appId,cookie:c.cookie,logging:c.logging,status:c.status,xfbml:c.xfbml,authResponse:c.authResponse,frictionlessRequests:c.frictionlessRequests,hideFlashCallback:c.hideFlashCallback}),f(function(){h.resolve(a)})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/all.js",e.parentNode.insertBefore(d,e))}(j,"script","facebook-jssdk")}else h.reject("$FB: appId is not set!");return d=h.promise,b}],this.getLoginStatus=function(){return d.then(function(a){var b=e.defer();return a.getLoginStatus(angular.bind(b,b.resolve)),b.promise})},this.api=function(){var a=arguments;return d.then(function(b){var c,d=e.defer(),f=Array.prototype.slice.call(a);return"function"==typeof f[f.length-1]&&(c=f.pop()),f.push(function(a){!a||a.error?d.reject(a||{error:!0}):d.resolve(a)}),b.api.apply(b,f),c?d.promise.then(c):d.promise})},this.login=function(a,b){return d.then(function(d){function f(a){var d=b&&b[a];return void 0===d?c[a]:d}var g=e.defer();return"function"!=typeof a&&(a=null,b=a),d.login(function(a){a.authResponse?g.resolve(a):g.reject(a)},{scope:f("scope"),enable_profile_selector:f("enable_profile_selector"),profile_selector_ids:f("profile_selector_ids")}),a?g.promise.then(a):g.promise})},this.logout=function(){return d.then(function(a){var b=e.defer();return a.logout(function(a){a?b.resolve(a):b.reject(a)}),b.promise})},this.disconnect=function(){return d.then(function(a){var b=e.defer();return a.api("/me/permissions","DELETE",function(a){a?b.resolve(a):b.reject(a)}),b.promise})}});