/*! angular-facebook-api - v0.0.3 - 2014-03-10 */
angular.module("jun.facebook",[]).provider("$FB",["$window","$q",function(a,b){"use strict";function c(a,b){return void 0===b?e[a]:(e[a]=b,d)}var d=this,e={appId:null,cookie:!1,logging:!0,status:!0,xfbml:!1,authResponse:void 0,frictionlessRequests:!1,hideFlashCallback:null,scope:"",enable_profile_selector:!1,profile_selector_ids:""};angular.forEach(["appId","cookie","logging","status","xfbml","authResponse","frictionlessRequests","hideFlashCallback","permissions"],function(a){this[a]=angular.bind(c,this,a)},this),this.option=function(a,b){return"object"==typeof a?(angular.extend(e,a),this):c(a,b)};var f;this.$get=["$timeout",function(c){var d=b.defer();if(e.appId){var g=a,h=g.document;g.fbAsyncInit=function(){var a=g.FB;a.init({appId:e.appId,cookie:e.cookie,logging:e.logging,status:e.status,xfbml:e.xfbml,authResponse:e.authResponse,frictionlessRequests:e.frictionlessRequests,hideFlashCallback:e.hideFlashCallback}),c(function(){d.resolve(a)})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/all.js",e.parentNode.insertBefore(d,e))}(h,"script","facebook-jssdk")}else d.reject("$FB: appId is not set!");return f=d.promise}],this.getLoginStatus=function(){return f.then(function(a){var c=b.defer();return a.getLoginStatus(angular.bind(c.resolve,c)),c.promise})},this.api=function(){var a=arguments;return f.then(function(c){var d,e=b.defer(),f=Array.prototype.slice.call(a);return"function"==typeof f[f.length-1]&&(d=f.pop()),f.push(function(a){!a||a.error?e.reject(a||{error:!0}):e.resolve(a)}),c.api.apply(c,f),d?e.promise.then(d):e.promise})},this.login=function(a,c){return f.then(function(d){function f(a){var b=c&&c[a];return void 0===b?e[a]:b}var g=b.defer();return"function"!=typeof a&&(a=null,c=a),d.login(function(a){a.authResponse?g.resolve(a):g.reject(a)},{scope:f("scope"),enable_profile_selector:f("enable_profile_selector"),profile_selector_ids:f("profile_selector_ids")}),a?g.promise.then(a):g.promise})},this.logout=function(){return f.then(function(a){var c=b.defer();return a.logout(angular.bind(c.resolve,c)),c.promise})}}]);