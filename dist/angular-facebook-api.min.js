/*! angular-facebook-api - v0.0.15 - 2014-03-10 */
angular.module("jun.facebook",[]).provider("$FB",function(){"use strict";function a(a,d){return void 0===d?c[a]:(c[a]=d,b)}var b=this,c={appId:null,cookie:!1,logging:!0,status:!0,xfbml:!1,authResponse:void 0,frictionlessRequests:!1,hideFlashCallback:null,scope:"",enable_profile_selector:!1,profile_selector_ids:""};angular.forEach(["appId","cookie","logging","status","xfbml","authResponse","frictionlessRequests","hideFlashCallback","scope","enable_profile_selector","profile_selector_ids"],function(c){b[c]=angular.bind(b,a,c)}),this.option=function(d,e){return"object"==typeof d?(angular.extend(c,d),b):a(d,e)};var d,e,f;this.$get=["$window","$timeout","$q",function(a,g,h){f=h;var i=f.defer();if(c.appId){var j=a,k=j.document;j.fbAsyncInit=function(){d=j.FB,d.init({appId:c.appId,cookie:c.cookie,logging:c.logging,status:c.status,xfbml:c.xfbml,authResponse:c.authResponse,frictionlessRequests:c.frictionlessRequests,hideFlashCallback:c.hideFlashCallback}),g(function(){i.resolve(d)})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/all.js",e.parentNode.insertBefore(d,e))}(k,"script","facebook-jssdk")}else i.reject("$FB: appId is not set!");return e=i.promise,b}],this.getLoginStatus=function(){return e.then(function(a){var b=f.defer();return a.getLoginStatus(function(a){a?b.resolve(a):b.reject(a)}),b.promise})},this.api=function(){var a=arguments;return e.then(function(b){var c,d=f.defer(),e=Array.prototype.slice.call(a);return"function"==typeof e[e.length-1]&&(c=e.pop()),e.push(function(a){!a||a.error?d.reject(a||{error:!0}):d.resolve(a)}),b.api.apply(b,e),c?d.promise.then(c):d.promise})},this.login=function(a,b){return e.then(function(d){function e(a){var d=b&&b[a];return void 0===d?c[a]:d}var g=f.defer();return"function"!=typeof a&&(a=null,b=a),d.login(function(a){a.authResponse?g.resolve(a):g.reject(a)},{scope:e("scope"),enable_profile_selector:e("enable_profile_selector"),profile_selector_ids:e("profile_selector_ids")}),a?g.promise.then(a):g.promise})},this.logout=function(){return b.getLoginStatus().then(function(a){var b=f.defer();return a.authResponse?d.logout(function(a){a?b.resolve(a):b.reject(a)}):b.reject(a),b.promise})},this.disconnect=function(){return e.then(function(a){var b=f.defer();return a.api("/me/permissions","DELETE",function(a){a===!0?b.resolve(a):b.reject(a&&a.error||a||!1)}),b.promise})}});